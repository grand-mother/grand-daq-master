<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>grand DAQ: /Users/timmer/Library/Mobile Documents/com~apple~CloudDocs/CloudWork/GRAND/grand-daq-master/Adaq/Adaq.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">grand DAQ
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_39a6bb39f2d50d8a27bccd42648c52d1.html">Adaq</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Adaq.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>DAQ Main project.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/wait.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &quot;Adaq.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0ee62c8205b5b75125a13b17ab94d0fd" id="r_a0ee62c8205b5b75125a13b17ab94d0fd"><td class="memItemLeft" align="right" valign="top"><a id="a0ee62c8205b5b75125a13b17ab94d0fd" name="a0ee62c8205b5b75125a13b17ab94d0fd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>_MAINDAQ</b></td></tr>
<tr class="separator:a0ee62c8205b5b75125a13b17ab94d0fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5c94d4acb22a5e925beb2fdbcdabf49" id="r_ac5c94d4acb22a5e925beb2fdbcdabf49"><td class="memItemLeft" align="right" valign="top"><a id="ac5c94d4acb22a5e925beb2fdbcdabf49" name="ac5c94d4acb22a5e925beb2fdbcdabf49"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DU_PORT</b>&#160;&#160;&#160;5001</td></tr>
<tr class="separator:ac5c94d4acb22a5e925beb2fdbcdabf49"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7095f447803e19fdc6d6c62b0d45152a" id="r_a7095f447803e19fdc6d6c62b0d45152a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_adaq_2_adaq_8c.html#a7095f447803e19fdc6d6c62b0d45152a">du_main</a> ()</td></tr>
<tr class="memdesc:a7095f447803e19fdc6d6c62b0d45152a"><td class="mdescLeft">&#160;</td><td class="mdescRight">main steering routine for the socket handling ignore SIGPIPE connecting to all detector units read from detector units write to detector units connect to all  <br /></td></tr>
<tr class="separator:a7095f447803e19fdc6d6c62b0d45152a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74a57fdde205738fd7ef54608de17606" id="r_a74a57fdde205738fd7ef54608de17606"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_adaq_2_adaq_8c.html#a74a57fdde205738fd7ef54608de17606">t3_main</a> ()</td></tr>
<tr class="separator:a74a57fdde205738fd7ef54608de17606"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acacb5dca2a2355ff9bab4e5812269e56" id="r_acacb5dca2a2355ff9bab4e5812269e56"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_adaq_2_adaq_8c.html#acacb5dca2a2355ff9bab4e5812269e56">eb_main</a> ()</td></tr>
<tr class="separator:acacb5dca2a2355ff9bab4e5812269e56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb2e1601d36246a534a09742b6676a73" id="r_aeb2e1601d36246a534a09742b6676a73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_adaq_2_adaq_8c.html#aeb2e1601d36246a534a09742b6676a73">ui_main</a> ()</td></tr>
<tr class="separator:aeb2e1601d36246a534a09742b6676a73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a153b946aabe02576231eb44476c8312c" id="r_a153b946aabe02576231eb44476c8312c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_adaq_2_adaq_8c.html#a153b946aabe02576231eb44476c8312c">gui_main</a> ()</td></tr>
<tr class="separator:a153b946aabe02576231eb44476c8312c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbbf7d60d96a749b6e9b320582d5de10" id="r_acbbf7d60d96a749b6e9b320582d5de10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_adaq_2_adaq_8c.html#acbbf7d60d96a749b6e9b320582d5de10">remove_shared_memory</a> ()</td></tr>
<tr class="separator:acbbf7d60d96a749b6e9b320582d5de10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e7526227a6d67734cfd602e2614111e" id="r_a0e7526227a6d67734cfd602e2614111e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_adaq_2_adaq_8c.html#a0e7526227a6d67734cfd602e2614111e">clean_stop</a> (int signum)</td></tr>
<tr class="memdesc:a0e7526227a6d67734cfd602e2614111e"><td class="mdescLeft">&#160;</td><td class="mdescRight">kill processes  <br /></td></tr>
<tr class="separator:a0e7526227a6d67734cfd602e2614111e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc3ddf07005dc64cdff0a11d6b70bdea" id="r_adc3ddf07005dc64cdff0a11d6b70bdea"><td class="memItemLeft" align="right" valign="top">pid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_adaq_2_adaq_8c.html#adc3ddf07005dc64cdff0a11d6b70bdea">ad_spawn_du</a> ()</td></tr>
<tr class="separator:adc3ddf07005dc64cdff0a11d6b70bdea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af161d40a0246dc0957a172b2c5ecccb5" id="r_af161d40a0246dc0957a172b2c5ecccb5"><td class="memItemLeft" align="right" valign="top">pid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_adaq_2_adaq_8c.html#af161d40a0246dc0957a172b2c5ecccb5">ad_spawn_t3</a> ()</td></tr>
<tr class="separator:af161d40a0246dc0957a172b2c5ecccb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c83ba624985910c8d6f2a0b53ad8b4f" id="r_a5c83ba624985910c8d6f2a0b53ad8b4f"><td class="memItemLeft" align="right" valign="top">pid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_adaq_2_adaq_8c.html#a5c83ba624985910c8d6f2a0b53ad8b4f">ad_spawn_eb</a> ()</td></tr>
<tr class="separator:a5c83ba624985910c8d6f2a0b53ad8b4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e10ab1a20ca0d856d7af11ce54e1914" id="r_a3e10ab1a20ca0d856d7af11ce54e1914"><td class="memItemLeft" align="right" valign="top">pid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_adaq_2_adaq_8c.html#a3e10ab1a20ca0d856d7af11ce54e1914">ad_spawn_ui</a> ()</td></tr>
<tr class="separator:a3e10ab1a20ca0d856d7af11ce54e1914"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ce9c583308daecd0bf4708847b5913c" id="r_a5ce9c583308daecd0bf4708847b5913c"><td class="memItemLeft" align="right" valign="top">pid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_adaq_2_adaq_8c.html#a5ce9c583308daecd0bf4708847b5913c">ad_spawn_gui</a> ()</td></tr>
<tr class="separator:a5ce9c583308daecd0bf4708847b5913c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41d75e78dcfd749bf915dca835d3ae86" id="r_a41d75e78dcfd749bf915dca835d3ae86"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_adaq_2_adaq_8c.html#a41d75e78dcfd749bf915dca835d3ae86">ad_init_param</a> (char *file)</td></tr>
<tr class="separator:a41d75e78dcfd749bf915dca835d3ae86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d59fd3be8562c7b75ed31ce7466915e" id="r_a6d59fd3be8562c7b75ed31ce7466915e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_adaq_2_adaq_8c.html#a6d59fd3be8562c7b75ed31ce7466915e">ad_initialize</a> (char *file)</td></tr>
<tr class="separator:a6d59fd3be8562c7b75ed31ce7466915e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74e9e27b530bbd818e2005ed63b0c6e2" id="r_a74e9e27b530bbd818e2005ed63b0c6e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_adaq_2_adaq_8c.html#a74e9e27b530bbd818e2005ed63b0c6e2">ad_check_processes</a> ()</td></tr>
<tr class="separator:a74e9e27b530bbd818e2005ed63b0c6e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627" id="r_a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_adaq_2_adaq_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a41f587a1d5403324a9915a7c6594586e" id="r_a41f587a1d5403324a9915a7c6594586e"><td class="memItemLeft" align="right" valign="top"><a id="a41f587a1d5403324a9915a7c6594586e" name="a41f587a1d5403324a9915a7c6594586e"></a>
pid_t&#160;</td><td class="memItemRight" valign="bottom"><b>pid_du</b></td></tr>
<tr class="separator:a41f587a1d5403324a9915a7c6594586e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a696ccb6e6dc97dca1e9d432f0d944e7f" id="r_a696ccb6e6dc97dca1e9d432f0d944e7f"><td class="memItemLeft" align="right" valign="top"><a id="a696ccb6e6dc97dca1e9d432f0d944e7f" name="a696ccb6e6dc97dca1e9d432f0d944e7f"></a>
pid_t&#160;</td><td class="memItemRight" valign="bottom"><b>pid_t3</b></td></tr>
<tr class="separator:a696ccb6e6dc97dca1e9d432f0d944e7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab00070b387e93b331fce7ce4380ad3ee" id="r_ab00070b387e93b331fce7ce4380ad3ee"><td class="memItemLeft" align="right" valign="top"><a id="ab00070b387e93b331fce7ce4380ad3ee" name="ab00070b387e93b331fce7ce4380ad3ee"></a>
pid_t&#160;</td><td class="memItemRight" valign="bottom"><b>pid_eb</b></td></tr>
<tr class="separator:ab00070b387e93b331fce7ce4380ad3ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9de303748a6bc235a0178696230861a3" id="r_a9de303748a6bc235a0178696230861a3"><td class="memItemLeft" align="right" valign="top"><a id="a9de303748a6bc235a0178696230861a3" name="a9de303748a6bc235a0178696230861a3"></a>
pid_t&#160;</td><td class="memItemRight" valign="bottom"><b>pid_ui</b></td></tr>
<tr class="separator:a9de303748a6bc235a0178696230861a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9e9f33b6cf51e01e361bcbb90c19417" id="r_af9e9f33b6cf51e01e361bcbb90c19417"><td class="memItemLeft" align="right" valign="top"><a id="af9e9f33b6cf51e01e361bcbb90c19417" name="af9e9f33b6cf51e01e361bcbb90c19417"></a>
pid_t&#160;</td><td class="memItemRight" valign="bottom"><b>pid_gui</b></td></tr>
<tr class="separator:af9e9f33b6cf51e01e361bcbb90c19417"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a832e9b64cbef8533a190e71ab02344fe" id="r_a832e9b64cbef8533a190e71ab02344fe"><td class="memItemLeft" align="right" valign="top"><a id="a832e9b64cbef8533a190e71ab02344fe" name="a832e9b64cbef8533a190e71ab02344fe"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>stop_process</b> =0</td></tr>
<tr class="separator:a832e9b64cbef8533a190e71ab02344fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab50a2ed2e8f5977a8155b1cbba53c9ac" id="r_ab50a2ed2e8f5977a8155b1cbba53c9ac"><td class="memItemLeft" align="right" valign="top"><a id="ab50a2ed2e8f5977a8155b1cbba53c9ac" name="ab50a2ed2e8f5977a8155b1cbba53c9ac"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>idebug</b> = 0</td></tr>
<tr class="separator:ab50a2ed2e8f5977a8155b1cbba53c9ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a761e2c812e0a5ab3b7afcbb2586d4012" id="r_a761e2c812e0a5ab3b7afcbb2586d4012"><td class="memItemLeft" align="right" valign="top"><a id="a761e2c812e0a5ab3b7afcbb2586d4012" name="a761e2c812e0a5ab3b7afcbb2586d4012"></a>
char *&#160;</td><td class="memItemRight" valign="bottom"><b>configfile</b></td></tr>
<tr class="separator:a761e2c812e0a5ab3b7afcbb2586d4012"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>DAQ Main project. </p>
<dl class="section author"><dt>Author</dt><dd>C. Timmermans, Nikhef/RU </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a74e9e27b530bbd818e2005ed63b0c6e2" name="a74e9e27b530bbd818e2005ed63b0c6e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74e9e27b530bbd818e2005ed63b0c6e2">&#9670;&#160;</a></span>ad_check_processes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ad_check_processes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>void <a class="el" href="_adaq_2_adaq_8c.html#a74e9e27b530bbd818e2005ed63b0c6e2">ad_check_processes()</a></p>
<p>check if the several spawned processes (interface to detector units, T3Maker, Eventbuilder, command line and graphical interface to the user) are still alive; if not it spawns a new instance </p>

</div>
</div>
<a id="a41d75e78dcfd749bf915dca835d3ae86" name="a41d75e78dcfd749bf915dca835d3ae86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41d75e78dcfd749bf915dca835d3ae86">&#9670;&#160;</a></span>ad_init_param()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ad_init_param </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>int <a class="el" href="_adaq_2_adaq_8c.html#a41d75e78dcfd749bf915dca835d3ae86">ad_init_param(char *file)</a> interprets the initialization file with keywords: DU ipaddress port EBRUN runnr EBSIZE maxevents --&gt; maximum number of events in a file EBDIR datadir --&gt; folder in which the data is stored EBSITE sitename --&gt; site where data is taken T3RAND randfrac --&gt; one T2 in every randfrac events is raised to a T3 </p>

</div>
</div>
<a id="a6d59fd3be8562c7b75ed31ce7466915e" name="a6d59fd3be8562c7b75ed31ce7466915e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d59fd3be8562c7b75ed31ce7466915e">&#9670;&#160;</a></span>ad_initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ad_initialize </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>void <a class="el" href="_adaq_2_adaq_8c.html#a6d59fd3be8562c7b75ed31ce7466915e">ad_initialize(char *file)</a></p>
<p>Initializes the main daq:</p><ul>
<li>read parameters from the initialization file</li>
<li>create the T2 shared memory</li>
<li>create the T3 shared memory</li>
<li>create event shared memory</li>
<li>create a shared memory for commands</li>
<li>spawn the T3 maker, event builder, interface to the detector units, graphical and command line interfaces to the user </li>
</ul>

</div>
</div>
<a id="adc3ddf07005dc64cdff0a11d6b70bdea" name="adc3ddf07005dc64cdff0a11d6b70bdea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc3ddf07005dc64cdff0a11d6b70bdea">&#9670;&#160;</a></span>ad_spawn_du()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pid_t ad_spawn_du </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>pid_t <a class="el" href="_adaq_2_adaq_8c.html#adc3ddf07005dc64cdff0a11d6b70bdea">ad_spawn_du()</a> creates a new instance of the interface to the detector units </p>

</div>
</div>
<a id="a5c83ba624985910c8d6f2a0b53ad8b4f" name="a5c83ba624985910c8d6f2a0b53ad8b4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c83ba624985910c8d6f2a0b53ad8b4f">&#9670;&#160;</a></span>ad_spawn_eb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pid_t ad_spawn_eb </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>pid_t <a class="el" href="_adaq_2_adaq_8c.html#a5c83ba624985910c8d6f2a0b53ad8b4f">ad_spawn_eb()</a> creates a new instance of the event builder </p>

</div>
</div>
<a id="a5ce9c583308daecd0bf4708847b5913c" name="a5ce9c583308daecd0bf4708847b5913c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ce9c583308daecd0bf4708847b5913c">&#9670;&#160;</a></span>ad_spawn_gui()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pid_t ad_spawn_gui </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>pid_t <a class="el" href="_adaq_2_adaq_8c.html#a5ce9c583308daecd0bf4708847b5913c">ad_spawn_gui()</a> creates a new instance of the interface to the graphical user interface </p>

</div>
</div>
<a id="af161d40a0246dc0957a172b2c5ecccb5" name="af161d40a0246dc0957a172b2c5ecccb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af161d40a0246dc0957a172b2c5ecccb5">&#9670;&#160;</a></span>ad_spawn_t3()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pid_t ad_spawn_t3 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>pid_t <a class="el" href="_adaq_2_adaq_8c.html#af161d40a0246dc0957a172b2c5ecccb5">ad_spawn_t3()</a> creates a new instance of the T3 maker </p>

</div>
</div>
<a id="a3e10ab1a20ca0d856d7af11ce54e1914" name="a3e10ab1a20ca0d856d7af11ce54e1914"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e10ab1a20ca0d856d7af11ce54e1914">&#9670;&#160;</a></span>ad_spawn_ui()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pid_t ad_spawn_ui </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>pid_t <a class="el" href="_adaq_2_adaq_8c.html#a3e10ab1a20ca0d856d7af11ce54e1914">ad_spawn_ui()</a> creates a new instance of the command line interface </p>

</div>
</div>
<a id="a0e7526227a6d67734cfd602e2614111e" name="a0e7526227a6d67734cfd602e2614111e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e7526227a6d67734cfd602e2614111e">&#9670;&#160;</a></span>clean_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clean_stop </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>kill processes </p>
<p>void r clean_stop (int signum) removes all attached shared memories and remove all spawned processes</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">signum</td><td>input signal (not used) kill child processes and perform a clean stop to clean up shared memory </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>C. Timmermans </dd></dl>

</div>
</div>
<a id="a7095f447803e19fdc6d6c62b0d45152a" name="a7095f447803e19fdc6d6c62b0d45152a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7095f447803e19fdc6d6c62b0d45152a">&#9670;&#160;</a></span>du_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void du_main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>main steering routine for the socket handling ignore SIGPIPE connecting to all detector units read from detector units write to detector units connect to all </p>
<p>\func void <a class="el" href="_adaq_2du_8c.html#a7095f447803e19fdc6d6c62b0d45152a" title="main steering routine for the socket handling ignore SIGPIPE connecting to all detector units read fr...">du_main()</a> </p>

</div>
</div>
<a id="acacb5dca2a2355ff9bab4e5812269e56" name="acacb5dca2a2355ff9bab4e5812269e56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acacb5dca2a2355ff9bab4e5812269e56">&#9670;&#160;</a></span>eb_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eb_main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>void eb_main()</p>
<p>main eventbuilder loop. Get data from the (graphical) user interface Get data from the T3Maker Get data from the DUs Write events to file </p>

</div>
</div>
<a id="a153b946aabe02576231eb44476c8312c" name="a153b946aabe02576231eb44476c8312c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a153b946aabe02576231eb44476c8312c">&#9670;&#160;</a></span>gui_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gui_main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>void gui_main()</p>
<p>Create a TCP/IP socket wait for connections read command close connection </p>

</div>
</div>
<a id="a3c04138a5bfe5d72780bb7e82a18e627" name="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>int main(int argc, char **argv)</p>
<p>Main program; first kills possible remnants of earlier instances. Afterwards it reads the configuration file and start the T3 maker, Event builder, Detector Unit communication and User interfaces. While the main DAQ process is alive it checks the state of the child processes.</p>
<p>Possible parameter: name of the configuration file</p>
<p>main program:</p><ul>
<li>Initializes responses to signals</li>
<li>read station ID from hosts file</li>
<li>Create shared memories</li>
<li>Create child processes for:<ul>
<li>Reading/writing IP-sockets</li>
<li>Reading/writing the scope</li>
</ul>
</li>
<li>Restart these processes when needed</li>
<li>After a stop is requested through an interrupt, clean up shared memories</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>Number of arguments when starting the program (not used) </td></tr>
    <tr><td class="paramname">argv</td><td>character string of arguments (not used) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>C. Timmermans </dd></dl>

</div>
</div>
<a id="acbbf7d60d96a749b6e9b320582d5de10" name="acbbf7d60d96a749b6e9b320582d5de10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbbf7d60d96a749b6e9b320582d5de10">&#9670;&#160;</a></span>remove_shared_memory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void remove_shared_memory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>void <a class="el" href="_adaq_2_adaq_8c.html#acbbf7d60d96a749b6e9b320582d5de10">remove_shared_memory()</a></p>
<p>removes all central DAQ shared memories: t2, t3, event builder and commands </p>

</div>
</div>
<a id="a74a57fdde205738fd7ef54608de17606" name="a74a57fdde205738fd7ef54608de17606"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74a57fdde205738fd7ef54608de17606">&#9670;&#160;</a></span>t3_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void t3_main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>void t3_main()</p>
<p>infinite loop: gett2 and maket3 </p>

</div>
</div>
<a id="aeb2e1601d36246a534a09742b6676a73" name="aeb2e1601d36246a534a09742b6676a73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb2e1601d36246a534a09742b6676a73">&#9670;&#160;</a></span>ui_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ui_main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>void ui_main()</p>
<p>prints prompt continuous loop waiting for input on the command line. Sends the following commands to the DAQ: STOP_RUN START_RUN INITIALIZE </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
