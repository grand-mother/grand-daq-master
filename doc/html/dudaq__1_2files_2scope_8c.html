<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>grand DAQ: /Users/timmer/Library/Mobile Documents/com~apple~CloudDocs/CloudWork/GRAND/grand-daq-master/dudaq_1/files/scope.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">grand DAQ
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_7e392150581f23372f05155063cf41c6.html">dudaq_1</a></li><li class="navelem"><a class="el" href="dir_253aecde60ef15e4bda9a19d6ba91f6d.html">files</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">scope.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>routines interfacing to the fpga  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;sys/mman.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &quot;ad_shm.h&quot;</code><br />
<code>#include &quot;<a class="el" href="dudaq__1_2files_2scope_8h_source.html">scope.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a663b31e647c5188218c8e9007f7a81e9" id="r_a663b31e647c5188218c8e9007f7a81e9"><td class="memItemLeft" align="right" valign="top"><a id="a663b31e647c5188218c8e9007f7a81e9" name="a663b31e647c5188218c8e9007f7a81e9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DEVFILE</b>&#160;&#160;&#160;&quot;/dev/mem&quot;</td></tr>
<tr class="memdesc:a663b31e647c5188218c8e9007f7a81e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Device for talking to the FPGA. <br /></td></tr>
<tr class="separator:a663b31e647c5188218c8e9007f7a81e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb08aff46bb7262714b2a36aba398c9d" id="r_adb08aff46bb7262714b2a36aba398c9d"><td class="memItemLeft" align="right" valign="top"><a id="adb08aff46bb7262714b2a36aba398c9d" name="adb08aff46bb7262714b2a36aba398c9d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DEV</b>&#160;&#160;&#160;int32_t</td></tr>
<tr class="memdesc:adb08aff46bb7262714b2a36aba398c9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">the type of the device id is really just a 32 bit integer <br /></td></tr>
<tr class="separator:adb08aff46bb7262714b2a36aba398c9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b46b61dc91acb0628b7655b24a7b092" id="r_a2b46b61dc91acb0628b7655b24a7b092"><td class="memItemLeft" align="right" valign="top"><a id="a2b46b61dc91acb0628b7655b24a7b092" name="a2b46b61dc91acb0628b7655b24a7b092"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAXTRY</b>&#160;&#160;&#160;50</td></tr>
<tr class="memdesc:a2b46b61dc91acb0628b7655b24a7b092"><td class="mdescLeft">&#160;</td><td class="mdescRight">maximal number of loops to complete reading from the FPGA <br /></td></tr>
<tr class="separator:a2b46b61dc91acb0628b7655b24a7b092"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8118356ae0fa80571aca6b00b5ba4397" id="r_a8118356ae0fa80571aca6b00b5ba4397"><td class="memItemLeft" align="right" valign="top"><a id="a8118356ae0fa80571aca6b00b5ba4397" name="a8118356ae0fa80571aca6b00b5ba4397"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UPDATESEC</b>&#160;&#160;&#160;100</td></tr>
<tr class="memdesc:a8118356ae0fa80571aca6b00b5ba4397"><td class="mdescLeft">&#160;</td><td class="mdescRight">time interval between succesive rate checks. Only used in dynamic monitoring of rate. <br /></td></tr>
<tr class="separator:a8118356ae0fa80571aca6b00b5ba4397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58d7bf37cefb16301db29f09cd9ba5ac" id="r_a58d7bf37cefb16301db29f09cd9ba5ac"><td class="memItemLeft" align="right" valign="top"><a id="a58d7bf37cefb16301db29f09cd9ba5ac" name="a58d7bf37cefb16301db29f09cd9ba5ac"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MINRRATE</b>&#160;&#160;&#160;(100*<a class="el" href="_d_u_2scope_8c.html#a8118356ae0fa80571aca6b00b5ba4397">UPDATESEC</a>)</td></tr>
<tr class="memdesc:a58d7bf37cefb16301db29f09cd9ba5ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">minimal radio rate <br /></td></tr>
<tr class="separator:a58d7bf37cefb16301db29f09cd9ba5ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2127c4f2fa09bfb43cca0d46788150c" id="r_aa2127c4f2fa09bfb43cca0d46788150c"><td class="memItemLeft" align="right" valign="top"><a id="aa2127c4f2fa09bfb43cca0d46788150c" name="aa2127c4f2fa09bfb43cca0d46788150c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MEANRRATE</b>&#160;&#160;&#160;(200*<a class="el" href="_d_u_2scope_8c.html#a8118356ae0fa80571aca6b00b5ba4397">UPDATESEC</a>)</td></tr>
<tr class="memdesc:aa2127c4f2fa09bfb43cca0d46788150c"><td class="mdescLeft">&#160;</td><td class="mdescRight">mean radio rate <br /></td></tr>
<tr class="separator:aa2127c4f2fa09bfb43cca0d46788150c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3482f4ee69e40fec04ece6fffcc5b090" id="r_a3482f4ee69e40fec04ece6fffcc5b090"><td class="memItemLeft" align="right" valign="top"><a id="a3482f4ee69e40fec04ece6fffcc5b090" name="a3482f4ee69e40fec04ece6fffcc5b090"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAXRRATE</b>&#160;&#160;&#160;(600*<a class="el" href="_d_u_2scope_8c.html#a8118356ae0fa80571aca6b00b5ba4397">UPDATESEC</a>)</td></tr>
<tr class="memdesc:a3482f4ee69e40fec04ece6fffcc5b090"><td class="mdescLeft">&#160;</td><td class="mdescRight">maximal radio rate <br /></td></tr>
<tr class="separator:a3482f4ee69e40fec04ece6fffcc5b090"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eb17bf5310b3f257e08bfa2fbf31ca4" id="r_a1eb17bf5310b3f257e08bfa2fbf31ca4"><td class="memItemLeft" align="right" valign="top"><a id="a1eb17bf5310b3f257e08bfa2fbf31ca4" name="a1eb17bf5310b3f257e08bfa2fbf31ca4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MINSRATE</b>&#160;&#160;&#160;(40*<a class="el" href="_d_u_2scope_8c.html#a8118356ae0fa80571aca6b00b5ba4397">UPDATESEC</a>)</td></tr>
<tr class="memdesc:a1eb17bf5310b3f257e08bfa2fbf31ca4"><td class="mdescLeft">&#160;</td><td class="mdescRight">minimal scintillator rate <br /></td></tr>
<tr class="separator:a1eb17bf5310b3f257e08bfa2fbf31ca4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac84d900eeb7aef35419abb3a20f50b08" id="r_ac84d900eeb7aef35419abb3a20f50b08"><td class="memItemLeft" align="right" valign="top"><a id="ac84d900eeb7aef35419abb3a20f50b08" name="ac84d900eeb7aef35419abb3a20f50b08"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MEANSRATE</b>&#160;&#160;&#160;(50*<a class="el" href="_d_u_2scope_8c.html#a8118356ae0fa80571aca6b00b5ba4397">UPDATESEC</a>)</td></tr>
<tr class="memdesc:ac84d900eeb7aef35419abb3a20f50b08"><td class="mdescLeft">&#160;</td><td class="mdescRight">mean scintillator rate <br /></td></tr>
<tr class="separator:ac84d900eeb7aef35419abb3a20f50b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e85928baf2c23b059c9ad4fed40f9ac" id="r_a8e85928baf2c23b059c9ad4fed40f9ac"><td class="memItemLeft" align="right" valign="top"><a id="a8e85928baf2c23b059c9ad4fed40f9ac" name="a8e85928baf2c23b059c9ad4fed40f9ac"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAXSRATE</b>&#160;&#160;&#160;(80*<a class="el" href="_d_u_2scope_8c.html#a8118356ae0fa80571aca6b00b5ba4397">UPDATESEC</a>)</td></tr>
<tr class="memdesc:a8e85928baf2c23b059c9ad4fed40f9ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">max scintillator rate <br /></td></tr>
<tr class="separator:a8e85928baf2c23b059c9ad4fed40f9ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf0fea40652c5fec4b4140281b098223" id="r_acf0fea40652c5fec4b4140281b098223"><td class="memItemLeft" align="right" valign="top"><a id="acf0fea40652c5fec4b4140281b098223" name="acf0fea40652c5fec4b4140281b098223"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>HVMAX</b>&#160;&#160;&#160;0xc0</td></tr>
<tr class="memdesc:acf0fea40652c5fec4b4140281b098223"><td class="mdescLeft">&#160;</td><td class="mdescRight">maximum HV for PMT's. Only used in dynamic monitoring of rate <br /></td></tr>
<tr class="separator:acf0fea40652c5fec4b4140281b098223"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a228b4562d5b4fdd5a558f29c6669ddf2" id="r_a228b4562d5b4fdd5a558f29c6669ddf2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dudaq__1_2files_2scope_8c.html#a228b4562d5b4fdd5a558f29c6669ddf2">scope_raw_write</a> (uint32_t reg_addr, uint32_t value)</td></tr>
<tr class="memdesc:a228b4562d5b4fdd5a558f29c6669ddf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">writes a buffer to the digitizer  <br /></td></tr>
<tr class="separator:a228b4562d5b4fdd5a558f29c6669ddf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3f7a810c3fc238a40437f650aad700d" id="r_ad3f7a810c3fc238a40437f650aad700d"><td class="memItemLeft" align="right" valign="top"><a id="ad3f7a810c3fc238a40437f650aad700d" name="ad3f7a810c3fc238a40437f650aad700d"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>scope_raw_read</b> (uint32_t reg_addr)</td></tr>
<tr class="separator:ad3f7a810c3fc238a40437f650aad700d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c895b654148a7385f85dc09b332b24b" id="r_a1c895b654148a7385f85dc09b332b24b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dudaq__1_2files_2scope_8c.html#a1c895b654148a7385f85dc09b332b24b">scope_flush</a> ()</td></tr>
<tr class="memdesc:a1c895b654148a7385f85dc09b332b24b"><td class="mdescLeft">&#160;</td><td class="mdescRight">empty routine  <br /></td></tr>
<tr class="separator:a1c895b654148a7385f85dc09b332b24b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9247308a7c4c77218798d40126e1b2be" id="r_a9247308a7c4c77218798d40126e1b2be"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dudaq__1_2files_2scope_8c.html#a9247308a7c4c77218798d40126e1b2be">scope_open</a> ()</td></tr>
<tr class="memdesc:a9247308a7c4c77218798d40126e1b2be"><td class="mdescLeft">&#160;</td><td class="mdescRight">opens connection to digitizer  <br /></td></tr>
<tr class="separator:a9247308a7c4c77218798d40126e1b2be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02756ee62fea9a11b9f89c44e12a0a65" id="r_a02756ee62fea9a11b9f89c44e12a0a65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dudaq__1_2files_2scope_8c.html#a02756ee62fea9a11b9f89c44e12a0a65">scope_close</a> ()</td></tr>
<tr class="memdesc:a02756ee62fea9a11b9f89c44e12a0a65"><td class="mdescLeft">&#160;</td><td class="mdescRight">closes scope communication  <br /></td></tr>
<tr class="separator:a02756ee62fea9a11b9f89c44e12a0a65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a506afe9b825fb1fed5acde2bc76e8d68" id="r_a506afe9b825fb1fed5acde2bc76e8d68"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dudaq__1_2files_2scope_8c.html#a506afe9b825fb1fed5acde2bc76e8d68">scope_reset</a> ()</td></tr>
<tr class="memdesc:a506afe9b825fb1fed5acde2bc76e8d68"><td class="mdescLeft">&#160;</td><td class="mdescRight">performs a soft reset on the scope  <br /></td></tr>
<tr class="separator:a506afe9b825fb1fed5acde2bc76e8d68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6ea501f53ade3c79f11f9b3935e8aa9" id="r_ae6ea501f53ade3c79f11f9b3935e8aa9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dudaq__1_2files_2scope_8c.html#ae6ea501f53ade3c79f11f9b3935e8aa9">scope_start_run</a> ()</td></tr>
<tr class="memdesc:ae6ea501f53ade3c79f11f9b3935e8aa9"><td class="mdescLeft">&#160;</td><td class="mdescRight">starts the run  <br /></td></tr>
<tr class="separator:ae6ea501f53ade3c79f11f9b3935e8aa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6ad70489062a18bc3f394452758e035" id="r_ab6ad70489062a18bc3f394452758e035"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dudaq__1_2files_2scope_8c.html#ab6ad70489062a18bc3f394452758e035">scope_stop_run</a> ()</td></tr>
<tr class="memdesc:ab6ad70489062a18bc3f394452758e035"><td class="mdescLeft">&#160;</td><td class="mdescRight">disables output  <br /></td></tr>
<tr class="separator:ab6ad70489062a18bc3f394452758e035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a603e895e867e66d6d647770e1952a5" id="r_a3a603e895e867e66d6d647770e1952a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dudaq__1_2files_2scope_8c.html#a3a603e895e867e66d6d647770e1952a5">scope_set_parameters</a> (uint32_t reg_addr, uint32_t value, uint32_t to_shadow)</td></tr>
<tr class="memdesc:a3a603e895e867e66d6d647770e1952a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">writes a parameter list to the scope (and the shadowlist)  <br /></td></tr>
<tr class="separator:a3a603e895e867e66d6d647770e1952a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59a93c7f3678aa0c67ed09095a66eac9" id="r_a59a93c7f3678aa0c67ed09095a66eac9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dudaq__1_2files_2scope_8c.html#a59a93c7f3678aa0c67ed09095a66eac9">scope_reboot</a> ()</td></tr>
<tr class="memdesc:a59a93c7f3678aa0c67ed09095a66eac9"><td class="mdescLeft">&#160;</td><td class="mdescRight">resets the fpga  <br /></td></tr>
<tr class="separator:a59a93c7f3678aa0c67ed09095a66eac9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a122e3e973152efd5f53c81623ecf274d" id="r_a122e3e973152efd5f53c81623ecf274d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dudaq__1_2files_2scope_8c.html#a122e3e973152efd5f53c81623ecf274d">scope_copy_shadow</a> ()</td></tr>
<tr class="memdesc:a122e3e973152efd5f53c81623ecf274d"><td class="mdescLeft">&#160;</td><td class="mdescRight">copy every parameter from the shadowlist into the fpga  <br /></td></tr>
<tr class="separator:a122e3e973152efd5f53c81623ecf274d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a333fc3568af7db9af3b96e520a554d62" id="r_a333fc3568af7db9af3b96e520a554d62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dudaq__1_2files_2scope_8c.html#a333fc3568af7db9af3b96e520a554d62">scope_init_shadow</a> ()</td></tr>
<tr class="memdesc:a333fc3568af7db9af3b96e520a554d62"><td class="mdescLeft">&#160;</td><td class="mdescRight">initializes the shadow list  <br /></td></tr>
<tr class="separator:a333fc3568af7db9af3b96e520a554d62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34f554820dbaa982450d7584532e11f2" id="r_a34f554820dbaa982450d7584532e11f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dudaq__1_2files_2scope_8c.html#a34f554820dbaa982450d7584532e11f2">scope_initialize</a> ()</td></tr>
<tr class="memdesc:a34f554820dbaa982450d7584532e11f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">initializes shadow memory, resets the digitizer and stops the run  <br /></td></tr>
<tr class="separator:a34f554820dbaa982450d7584532e11f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31504a32abdee69b40abeb2db1a8e272" id="r_a31504a32abdee69b40abeb2db1a8e272"><td class="memItemLeft" align="right" valign="top"><a id="a31504a32abdee69b40abeb2db1a8e272" name="a31504a32abdee69b40abeb2db1a8e272"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>scope_create_memory</b> ()</td></tr>
<tr class="separator:a31504a32abdee69b40abeb2db1a8e272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a514ec5a01f57489fa0319b9d6eca213e" id="r_a514ec5a01f57489fa0319b9d6eca213e"><td class="memItemLeft" align="right" valign="top"><a id="a514ec5a01f57489fa0319b9d6eca213e" name="a514ec5a01f57489fa0319b9d6eca213e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>scope_t2</b> ()</td></tr>
<tr class="separator:a514ec5a01f57489fa0319b9d6eca213e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2453dfed8e67d3ac98336be9eb83bcce" id="r_a2453dfed8e67d3ac98336be9eb83bcce"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dudaq__1_2files_2scope_8c.html#a2453dfed8e67d3ac98336be9eb83bcce">scope_read_event</a> (int32_t ioff)</td></tr>
<tr class="memdesc:a2453dfed8e67d3ac98336be9eb83bcce"><td class="mdescLeft">&#160;</td><td class="mdescRight">read an event from the fpga  <br /></td></tr>
<tr class="separator:a2453dfed8e67d3ac98336be9eb83bcce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5d90138a67de94bc83b772c39cba2a4" id="r_aa5d90138a67de94bc83b772c39cba2a4"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dudaq__1_2files_2scope_8c.html#aa5d90138a67de94bc83b772c39cba2a4">scope_read_pps</a> ()</td></tr>
<tr class="memdesc:aa5d90138a67de94bc83b772c39cba2a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">read pps, convert timestamp to GPS time, update circular GPS buffer  <br /></td></tr>
<tr class="separator:aa5d90138a67de94bc83b772c39cba2a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a292fcdfa610afd0cfe60482be5be96e8" id="r_a292fcdfa610afd0cfe60482be5be96e8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dudaq__1_2files_2scope_8c.html#a292fcdfa610afd0cfe60482be5be96e8">scope_read</a> (int ioff)</td></tr>
<tr class="memdesc:a292fcdfa610afd0cfe60482be5be96e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">reads data from a scope in the appropriate buffer.  <br /></td></tr>
<tr class="separator:a292fcdfa610afd0cfe60482be5be96e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af00f0aa0824921216fd93fc510607ce4" id="r_af00f0aa0824921216fd93fc510607ce4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dudaq__1_2files_2scope_8c.html#af00f0aa0824921216fd93fc510607ce4">scope_no_run_read</a> ()</td></tr>
<tr class="memdesc:af00f0aa0824921216fd93fc510607ce4"><td class="mdescLeft">&#160;</td><td class="mdescRight">reads data from scope, meant to use if there is no run  <br /></td></tr>
<tr class="separator:af00f0aa0824921216fd93fc510607ce4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a989d5bdd1c94c8749904417e8e982014" id="r_a989d5bdd1c94c8749904417e8e982014"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dudaq__1_2files_2scope_8c.html#a989d5bdd1c94c8749904417e8e982014">scope_run_read</a> ()</td></tr>
<tr class="memdesc:a989d5bdd1c94c8749904417e8e982014"><td class="mdescLeft">&#160;</td><td class="mdescRight">reads data from scope during a run. If there has not been data for more than 11 sec, reset the scope and restart the run.  <br /></td></tr>
<tr class="separator:a989d5bdd1c94c8749904417e8e982014"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e96bf11f12682eac7283e3310a4614c" id="r_a0e96bf11f12682eac7283e3310a4614c"><td class="memItemLeft" align="right" valign="top"><a id="a0e96bf11f12682eac7283e3310a4614c" name="a0e96bf11f12682eac7283e3310a4614c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>scope_event_to_shm</b> (uint16_t evnr, uint16_t trflag, uint16_t sec, uint32_t ssec)</td></tr>
<tr class="separator:a0e96bf11f12682eac7283e3310a4614c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad60a268ca94c07a576557ff4180389df" id="r_ad60a268ca94c07a576557ff4180389df"><td class="memItemLeft" align="right" valign="top"><a id="ad60a268ca94c07a576557ff4180389df" name="ad60a268ca94c07a576557ff4180389df"></a>
<a class="el" href="_d_u_2scope_8c.html#adb08aff46bb7262714b2a36aba398c9d">DEV</a>&#160;</td><td class="memItemRight" valign="bottom"><b>dev</b> = 0</td></tr>
<tr class="memdesc:ad60a268ca94c07a576557ff4180389df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Device id. <br /></td></tr>
<tr class="separator:ad60a268ca94c07a576557ff4180389df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1a4dd288242c6ca6e150b449517b010" id="r_ad1a4dd288242c6ca6e150b449517b010"><td class="memItemLeft" align="right" valign="top"><a id="ad1a4dd288242c6ca6e150b449517b010" name="ad1a4dd288242c6ca6e150b449517b010"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><b>axi_ptr</b></td></tr>
<tr class="separator:ad1a4dd288242c6ca6e150b449517b010"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0179c8ebaa94683c32ca7328a5040d33" id="r_a0179c8ebaa94683c32ca7328a5040d33"><td class="memItemLeft" align="right" valign="top"><a id="a0179c8ebaa94683c32ca7328a5040d33" name="a0179c8ebaa94683c32ca7328a5040d33"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>page_offset</b></td></tr>
<tr class="separator:a0179c8ebaa94683c32ca7328a5040d33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a967e91bd9e44a1bf4c1f7d2623b8b9d1" id="r_a967e91bd9e44a1bf4c1f7d2623b8b9d1"><td class="memItemLeft" align="right" valign="top"><a id="a967e91bd9e44a1bf4c1f7d2623b8b9d1" name="a967e91bd9e44a1bf4c1f7d2623b8b9d1"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>station_id</b></td></tr>
<tr class="memdesc:a967e91bd9e44a1bf4c1f7d2623b8b9d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">id of the LS, obtained from the ip address <br /></td></tr>
<tr class="separator:a967e91bd9e44a1bf4c1f7d2623b8b9d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b3ad6f4f8f4b807b90fcd5de25b485b" id="r_a0b3ad6f4f8f4b807b90fcd5de25b485b"><td class="memItemLeft" align="right" valign="top"><a id="a0b3ad6f4f8f4b807b90fcd5de25b485b" name="a0b3ad6f4f8f4b807b90fcd5de25b485b"></a>
<a class="el" href="structshm__struct.html">shm_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><b>shm_ev</b></td></tr>
<tr class="memdesc:a0b3ad6f4f8f4b807b90fcd5de25b485b"><td class="mdescLeft">&#160;</td><td class="mdescRight">shared memory containing all event info, including read/write pointers <br /></td></tr>
<tr class="separator:a0b3ad6f4f8f4b807b90fcd5de25b485b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09571a10d0b58a51a104bf701a337df6" id="r_a09571a10d0b58a51a104bf701a337df6"><td class="memItemLeft" align="right" valign="top"><a id="a09571a10d0b58a51a104bf701a337df6" name="a09571a10d0b58a51a104bf701a337df6"></a>
uint16_t *&#160;</td><td class="memItemRight" valign="bottom"><b>t3buf</b></td></tr>
<tr class="separator:a09571a10d0b58a51a104bf701a337df6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a243df20e2497f32e6fe4835b594b2d52" id="r_a243df20e2497f32e6fe4835b594b2d52"><td class="memItemLeft" align="right" valign="top"><a id="a243df20e2497f32e6fe4835b594b2d52" name="a243df20e2497f32e6fe4835b594b2d52"></a>
<a class="el" href="structshm__struct.html">shm_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><b>shm_gps</b></td></tr>
<tr class="memdesc:a243df20e2497f32e6fe4835b594b2d52"><td class="mdescLeft">&#160;</td><td class="mdescRight">shared memory containing all GPS info, including read/write pointers <br /></td></tr>
<tr class="separator:a243df20e2497f32e6fe4835b594b2d52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a8f7033ed411c72a64fa5cf17ea3484" id="r_a9a8f7033ed411c72a64fa5cf17ea3484"><td class="memItemLeft" align="right" valign="top"><a id="a9a8f7033ed411c72a64fa5cf17ea3484" name="a9a8f7033ed411c72a64fa5cf17ea3484"></a>
<a class="el" href="structshm__struct.html">shm_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><b>shm_ts</b></td></tr>
<tr class="memdesc:a9a8f7033ed411c72a64fa5cf17ea3484"><td class="mdescLeft">&#160;</td><td class="mdescRight">shared memory containing all timestamp info, including read/write pointers <br /></td></tr>
<tr class="separator:a9a8f7033ed411c72a64fa5cf17ea3484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5070fcf7f11341198c1ae2f680449253" id="r_a5070fcf7f11341198c1ae2f680449253"><td class="memItemLeft" align="right" valign="top"><a id="a5070fcf7f11341198c1ae2f680449253" name="a5070fcf7f11341198c1ae2f680449253"></a>
<a class="el" href="structshm__struct.html">shm_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><b>shm_mon</b></td></tr>
<tr class="memdesc:a5070fcf7f11341198c1ae2f680449253"><td class="mdescLeft">&#160;</td><td class="mdescRight">shared memory containing monitoring info <br /></td></tr>
<tr class="separator:a5070fcf7f11341198c1ae2f680449253"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acac741c0dd6b0e151ab4669236de50a6" id="r_acac741c0dd6b0e151ab4669236de50a6"><td class="memItemLeft" align="right" valign="top"><a id="acac741c0dd6b0e151ab4669236de50a6" name="acac741c0dd6b0e151ab4669236de50a6"></a>
<a class="el" href="struct_g_p_s___d_a_t_a.html">GPS_DATA</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>gpsbuf</b></td></tr>
<tr class="memdesc:acac741c0dd6b0e151ab4669236de50a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">buffer to hold GPS information <br /></td></tr>
<tr class="separator:acac741c0dd6b0e151ab4669236de50a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab4f38b17989bb328781b37d2861a30a" id="r_aab4f38b17989bb328781b37d2861a30a"><td class="memItemLeft" align="right" valign="top"><a id="aab4f38b17989bb328781b37d2861a30a" name="aab4f38b17989bb328781b37d2861a30a"></a>
<a class="el" href="struct_t_s___d_a_t_a.html">TS_DATA</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>timestampbuf</b></td></tr>
<tr class="separator:aab4f38b17989bb328781b37d2861a30a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3d4f8275397fc3492e8b1fe9ab8b232" id="r_aa3d4f8275397fc3492e8b1fe9ab8b232"><td class="memItemLeft" align="right" valign="top"><a id="aa3d4f8275397fc3492e8b1fe9ab8b232" name="aa3d4f8275397fc3492e8b1fe9ab8b232"></a>
uint16_t *&#160;</td><td class="memItemRight" valign="bottom"><b>evtbuf</b> =NULL</td></tr>
<tr class="separator:aa3d4f8275397fc3492e8b1fe9ab8b232"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9146af478fa38a31adbb4b419da9232b" id="r_a9146af478fa38a31adbb4b419da9232b"><td class="memItemLeft" align="right" valign="top"><a id="a9146af478fa38a31adbb4b419da9232b" name="a9146af478fa38a31adbb4b419da9232b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>ptr_evt</b> =0</td></tr>
<tr class="separator:a9146af478fa38a31adbb4b419da9232b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bccab21ccefe661c892fa2a7e4fe2c4" id="r_a1bccab21ccefe661c892fa2a7e4fe2c4"><td class="memItemLeft" align="right" valign="top"><a id="a1bccab21ccefe661c892fa2a7e4fe2c4" name="a1bccab21ccefe661c892fa2a7e4fe2c4"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>ppsbuf</b> [WCNT_PPS *<a class="el" href="_d_u_2scope_8h.html#a675acc4cc1e06dfad7cfa50c7e069f82">GPSSIZE</a>]</td></tr>
<tr class="separator:a1bccab21ccefe661c892fa2a7e4fe2c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbcd43e1d4d0126f43167de76e9f578f" id="r_afbcd43e1d4d0126f43167de76e9f578f"><td class="memItemLeft" align="right" valign="top"><a id="afbcd43e1d4d0126f43167de76e9f578f" name="afbcd43e1d4d0126f43167de76e9f578f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>n_evt</b> = 0</td></tr>
<tr class="separator:afbcd43e1d4d0126f43167de76e9f578f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a991f8889cfdcd9c7db60dbf94781604a" id="r_a991f8889cfdcd9c7db60dbf94781604a"><td class="memItemLeft" align="right" valign="top"><a id="a991f8889cfdcd9c7db60dbf94781604a" name="a991f8889cfdcd9c7db60dbf94781604a"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>evgps</b> =0</td></tr>
<tr class="memdesc:a991f8889cfdcd9c7db60dbf94781604a"><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to next GPS info <br /></td></tr>
<tr class="separator:a991f8889cfdcd9c7db60dbf94781604a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a713e77167380835215a35c4d3658f065" id="r_a713e77167380835215a35c4d3658f065"><td class="memItemLeft" align="right" valign="top"><a id="a713e77167380835215a35c4d3658f065" name="a713e77167380835215a35c4d3658f065"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>prevgps</b> = 0</td></tr>
<tr class="separator:a713e77167380835215a35c4d3658f065"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7935548448144453a965ca585433be6a" id="r_a7935548448144453a965ca585433be6a"><td class="memItemLeft" align="right" valign="top"><a id="a7935548448144453a965ca585433be6a" name="a7935548448144453a965ca585433be6a"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>firmware_version</b></td></tr>
<tr class="memdesc:a7935548448144453a965ca585433be6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">version of the firmware of the scope <br /></td></tr>
<tr class="separator:a7935548448144453a965ca585433be6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af27e8120c09237dacfb06b9756a036cf" id="r_af27e8120c09237dacfb06b9756a036cf"><td class="memItemLeft" align="right" valign="top"><a id="af27e8120c09237dacfb06b9756a036cf" name="af27e8120c09237dacfb06b9756a036cf"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>leap_sec</b> = 0</td></tr>
<tr class="memdesc:af27e8120c09237dacfb06b9756a036cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of leap seconds in UTC; read from GPS unit. <br /></td></tr>
<tr class="separator:af27e8120c09237dacfb06b9756a036cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6ef4f8841300f61f28ec47ae95516e8" id="r_af6ef4f8841300f61f28ec47ae95516e8"><td class="memItemLeft" align="right" valign="top"><a id="af6ef4f8841300f61f28ec47ae95516e8" name="af6ef4f8841300f61f28ec47ae95516e8"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>shadowlist</b> [Reg_End &gt; &gt;2]</td></tr>
<tr class="memdesc:af6ef4f8841300f61f28ec47ae95516e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">all parameters to set in FPGA <br /></td></tr>
<tr class="separator:af6ef4f8841300f61f28ec47ae95516e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c2e618073b9eaa010993c9f4bed9bb0" id="r_a1c2e618073b9eaa010993c9f4bed9bb0"><td class="memItemLeft" align="right" valign="top"><a id="a1c2e618073b9eaa010993c9f4bed9bb0" name="a1c2e618073b9eaa010993c9f4bed9bb0"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>shadowlistR</b> [Reg_End &gt; &gt;2]</td></tr>
<tr class="memdesc:a1c2e618073b9eaa010993c9f4bed9bb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">all parameters read from FPGA <br /></td></tr>
<tr class="separator:a1c2e618073b9eaa010993c9f4bed9bb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3732e9ebc709fe8d581397a7a3f76e69" id="r_a3732e9ebc709fe8d581397a7a3f76e69"><td class="memItemLeft" align="right" valign="top"><a id="a3732e9ebc709fe8d581397a7a3f76e69" name="a3732e9ebc709fe8d581397a7a3f76e69"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>shadow_filled</b> = 0</td></tr>
<tr class="memdesc:a3732e9ebc709fe8d581397a7a3f76e69"><td class="mdescLeft">&#160;</td><td class="mdescRight">the shadow list is not filled <br /></td></tr>
<tr class="separator:a3732e9ebc709fe8d581397a7a3f76e69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab40d8a5e429b7a50204ec136dac7a69f" id="r_ab40d8a5e429b7a50204ec136dac7a69f"><td class="memItemLeft" align="right" valign="top"><a id="ab40d8a5e429b7a50204ec136dac7a69f" name="ab40d8a5e429b7a50204ec136dac7a69f"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><b>setsystime</b> =0</td></tr>
<tr class="memdesc:ab40d8a5e429b7a50204ec136dac7a69f"><td class="mdescLeft">&#160;</td><td class="mdescRight">check if system time is set <br /></td></tr>
<tr class="separator:ab40d8a5e429b7a50204ec136dac7a69f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53c135777e016abbcb703adf7fa339dd" id="r_a53c135777e016abbcb703adf7fa339dd"><td class="memItemLeft" align="right" valign="top"><a id="a53c135777e016abbcb703adf7fa339dd" name="a53c135777e016abbcb703adf7fa339dd"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>evtlen</b></td></tr>
<tr class="separator:a53c135777e016abbcb703adf7fa339dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>routines interfacing to the fpga </p>
<dl class="section author"><dt>Author</dt><dd>C. Timmermans, Nikhef/RU </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a02756ee62fea9a11b9f89c44e12a0a65" name="a02756ee62fea9a11b9f89c44e12a0a65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02756ee62fea9a11b9f89c44e12a0a65">&#9670;&#160;</a></span>scope_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scope_close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>closes scope communication </p>
<p>\func void <a class="el" href="_d_u_2scope_8c.html#a02756ee62fea9a11b9f89c44e12a0a65" title="closes scope communication">scope_close()</a> </p>

</div>
</div>
<a id="a122e3e973152efd5f53c81623ecf274d" name="a122e3e973152efd5f53c81623ecf274d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a122e3e973152efd5f53c81623ecf274d">&#9670;&#160;</a></span>scope_copy_shadow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scope_copy_shadow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>copy every parameter from the shadowlist into the fpga </p>
<p>\func void <a class="el" href="_d_u_2scope_8c.html#a122e3e973152efd5f53c81623ecf274d" title="copy every parameter from the shadowlist into the fpga">scope_copy_shadow()</a> </p>

</div>
</div>
<a id="a1c895b654148a7385f85dc09b332b24b" name="a1c895b654148a7385f85dc09b332b24b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c895b654148a7385f85dc09b332b24b">&#9670;&#160;</a></span>scope_flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scope_flush </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>empty routine </p>
<p>\func void <a class="el" href="_d_u_2scope_8c.html#a1c895b654148a7385f85dc09b332b24b" title="empty routine">scope_flush()</a> </p>

</div>
</div>
<a id="a333fc3568af7db9af3b96e520a554d62" name="a333fc3568af7db9af3b96e520a554d62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a333fc3568af7db9af3b96e520a554d62">&#9670;&#160;</a></span>scope_init_shadow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scope_init_shadow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initializes the shadow list </p>
<p>\func void <a class="el" href="_d_u_2scope_8c.html#a333fc3568af7db9af3b96e520a554d62" title="initializes the shadow list">scope_init_shadow()</a> </p>

</div>
</div>
<a id="a34f554820dbaa982450d7584532e11f2" name="a34f554820dbaa982450d7584532e11f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34f554820dbaa982450d7584532e11f2">&#9670;&#160;</a></span>scope_initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scope_initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initializes shadow memory, resets the digitizer and stops the run </p>
<p>\func void <a class="el" href="_d_u_2scope_8c.html#a34f554820dbaa982450d7584532e11f2" title="initializes shadow memory, resets the digitizer and stops the run">scope_initialize()</a> </p>

</div>
</div>
<a id="af00f0aa0824921216fd93fc510607ce4" name="af00f0aa0824921216fd93fc510607ce4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af00f0aa0824921216fd93fc510607ce4">&#9670;&#160;</a></span>scope_no_run_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int scope_no_run_read </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>reads data from scope, meant to use if there is no run </p>
<p>\func int <a class="el" href="_d_u_2scope_8c.html#af00f0aa0824921216fd93fc510607ce4" title="reads data from scope, meant to use if there is no run">scope_no_run_read()</a> </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">scope_read(0)</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9247308a7c4c77218798d40126e1b2be" name="a9247308a7c4c77218798d40126e1b2be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9247308a7c4c77218798d40126e1b2be">&#9670;&#160;</a></span>scope_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int scope_open </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>opens connection to digitizer </p>
<p>\func int <a class="el" href="_d_u_2scope_8c.html#a9247308a7c4c77218798d40126e1b2be" title="opens connection to digitizer">scope_open()</a> </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>failure </td></tr>
    <tr><td class="paramname">1</td><td>succes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a228b4562d5b4fdd5a558f29c6669ddf2" name="a228b4562d5b4fdd5a558f29c6669ddf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a228b4562d5b4fdd5a558f29c6669ddf2">&#9670;&#160;</a></span>scope_raw_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scope_raw_write </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>reg_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>writes a buffer to the digitizer </p>
<p>\func void scope_raw_write(unsigned int *buf, int len) </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>pointer to the data to send </td></tr>
    <tr><td class="paramname">len</td><td>number of bytes to send </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a292fcdfa610afd0cfe60482be5be96e8" name="a292fcdfa610afd0cfe60482be5be96e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a292fcdfa610afd0cfe60482be5be96e8">&#9670;&#160;</a></span>scope_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int scope_read </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ioff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>reads data from a scope in the appropriate buffer. </p>
<p>\func int <a class="el" href="_d_u_2scope_8c.html#a292fcdfa610afd0cfe60482be5be96e8" title="reads data from a scope in the appropriate buffer.">scope_read(int ioff)</a> </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ioff</td><td>after reading the pointers to the buffers (event/monitor) are increased by ioff </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>No Data </td></tr>
    <tr><td class="paramname">-1</td><td>First word not a header </td></tr>
    <tr><td class="paramname">-2</td><td>Only start-of-message read </td></tr>
    <tr><td class="paramname">-3</td><td>Bad data identifier </td></tr>
    <tr><td class="paramname">-4</td><td>Error reading scope parameters </td></tr>
    <tr><td class="paramname">-5</td><td>Cannot read event header </td></tr>
    <tr><td class="paramname">-6</td><td>Error reading ADC values </td></tr>
    <tr><td class="paramname">-7</td><td>Error reading GPS parameters </td></tr>
    <tr><td class="paramname">SCOPE_PARAM</td><td>successfully read scope parameters </td></tr>
    <tr><td class="paramname">SCOPE_EVENT</td><td>successfully read scope event </td></tr>
    <tr><td class="paramname">SCOPE_GPS</td><td>succesfully read GPS PPS info </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2453dfed8e67d3ac98336be9eb83bcce" name="a2453dfed8e67d3ac98336be9eb83bcce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2453dfed8e67d3ac98336be9eb83bcce">&#9670;&#160;</a></span>scope_read_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int scope_read_event </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>ioff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read an event from the fpga </p>
<p>\func int <a class="el" href="_d_u_2scope_8c.html#a2453dfed8e67d3ac98336be9eb83bcce" title="read an event from the fpga">scope_read_event(int32_t ioff)</a> </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ioff</td><td>1 to update the event buffer. When 0 no update is made </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-10</td><td>too much data in the event </td></tr>
    <tr><td class="paramname">-11</td><td>not all data is read </td></tr>
    <tr><td class="paramname">SCOPE_EVENT</td><td>succesfully read event </td></tr>
  </table>
  </dd>
</dl>
<p>temp fix for ARG</p>
<p>temp fix for ARG</p>
<p>temp fix for ARG</p>
<p>temp fix for ARG</p>
<p>temp fix for ARG</p>

</div>
</div>
<a id="aa5d90138a67de94bc83b772c39cba2a4" name="aa5d90138a67de94bc83b772c39cba2a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5d90138a67de94bc83b772c39cba2a4">&#9670;&#160;</a></span>scope_read_pps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t scope_read_pps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read pps, convert timestamp to GPS time, update circular GPS buffer </p>
<p>\func int32_t <a class="el" href="_d_u_2scope_8c.html#aa5d90138a67de94bc83b772c39cba2a4" title="read pps, convert timestamp to GPS time, update circular GPS buffer">scope_read_pps()</a> </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-7</td><td>error in reading the PPS </td></tr>
    <tr><td class="paramname">SCOPE_GPS</td><td>OK </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a59a93c7f3678aa0c67ed09095a66eac9" name="a59a93c7f3678aa0c67ed09095a66eac9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59a93c7f3678aa0c67ed09095a66eac9">&#9670;&#160;</a></span>scope_reboot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scope_reboot </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>resets the fpga </p>
<p>\func void <a class="el" href="_d_u_2scope_8c.html#a59a93c7f3678aa0c67ed09095a66eac9" title="resets the fpga">scope_reboot()</a> </p>

</div>
</div>
<a id="a506afe9b825fb1fed5acde2bc76e8d68" name="a506afe9b825fb1fed5acde2bc76e8d68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a506afe9b825fb1fed5acde2bc76e8d68">&#9670;&#160;</a></span>scope_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scope_reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>performs a soft reset on the scope </p>
<p>\func void <a class="el" href="_d_u_2scope_8c.html#a506afe9b825fb1fed5acde2bc76e8d68" title="performs a soft reset on the scope">scope_reset()</a> </p>

</div>
</div>
<a id="a989d5bdd1c94c8749904417e8e982014" name="a989d5bdd1c94c8749904417e8e982014"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a989d5bdd1c94c8749904417e8e982014">&#9670;&#160;</a></span>scope_run_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int scope_run_read </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>reads data from scope during a run. If there has not been data for more than 11 sec, reset the scope and restart the run. </p>
<p>\func int <a class="el" href="_d_u_2scope_8c.html#a989d5bdd1c94c8749904417e8e982014" title="reads data from scope during a run. If there has not been data for more than 11 sec,...">scope_run_read()</a> </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">scope_read(1)</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3a603e895e867e66d6d647770e1952a5" name="a3a603e895e867e66d6d647770e1952a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a603e895e867e66d6d647770e1952a5">&#9670;&#160;</a></span>scope_set_parameters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scope_set_parameters </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>reg_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>to_shadow</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>writes a parameter list to the scope (and the shadowlist) </p>
<p>\func scope_set_parameters(unsigned short int *data,int to_shadow) </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>contains the parameter and its value </td></tr>
    <tr><td class="paramname">to_shadow</td><td>If 1 writes to the shadowlist, otherwise do not. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae6ea501f53ade3c79f11f9b3935e8aa9" name="ae6ea501f53ade3c79f11f9b3935e8aa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6ea501f53ade3c79f11f9b3935e8aa9">&#9670;&#160;</a></span>scope_start_run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scope_start_run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>starts the run </p>
<p>\func void <a class="el" href="_d_u_2scope_8c.html#ae6ea501f53ade3c79f11f9b3935e8aa9" title="starts the run">scope_start_run()</a> </p>

</div>
</div>
<a id="ab6ad70489062a18bc3f394452758e035" name="ab6ad70489062a18bc3f394452758e035"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6ad70489062a18bc3f394452758e035">&#9670;&#160;</a></span>scope_stop_run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scope_stop_run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>disables output </p>
<p>\func void <a class="el" href="_d_u_2scope_8c.html#ab6ad70489062a18bc3f394452758e035" title="disables output">scope_stop_run()</a> </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
